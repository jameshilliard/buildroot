From 8b63801bfdb1f0cf7fde4f58e96f8628a587b186 Mon Sep 17 00:00:00 2001
From: Alan Brooks <12380017+alan-brooks@users.noreply.github.com>
Date: Thu, 28 Dec 2023 16:17:49 +0000
Subject: [PATCH] _set_coroutine_debug has args difference in python 3.11

Signed-off-by: James Hilliard <james.hilliard1@gmail.com>
Upstream: https://github.com/MagicStack/uvloop/pull/587
---
 uvloop/loop.pyx | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/uvloop/loop.pyx b/uvloop/loop.pyx
index 53e1160..5ca718e 100644
--- a/uvloop/loop.pyx
+++ b/uvloop/loop.pyx
@@ -1396,8 +1396,9 @@ cdef class Loop:
     def set_debug(self, enabled):
         self._debug = bool(enabled)
         if self.is_running():
+            args = (self, self._debug) if sys.version_info < (3, 11) else (self._debug,)
             self.call_soon_threadsafe(
-                self._set_coroutine_debug, self._debug)
+                self._set_coroutine_debug, *args)
 
     def is_running(self):
         """Return whether the event loop is currently running."""
-- 
2.34.1

